<!DOCTYPE html>
<!--
        home.html
        
        created at Mar 22, 2014
        @author: Marcellin N. <nshimiye@ovi.com>

        This file is a property of Marcellin N.
-->
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">
        <link rel="shortcut icon" href="ico/favicon.ico">

        <title>The Summit</title>

        <!-- Bootstrap core CSS -->
        <link href="css/boot/css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom styles for this template -->
        <link href="css/boot/cover.css" rel="stylesheet">

        <link href="css/main.css" rel="stylesheet">

        <link href='http://fonts.googleapis.com/css?family=Lato:100,200,300,400,700,900' rel='stylesheet' type='text/css'>

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
          <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>

    <body>
        <div class="site-wrapper">

            <div class="site-wrapper-inner">

                <div class="cover-container" >
                    <!-----------fixed header here----------->

                    <div class="masthead clearfix" style="
                         /*                         border: 1px solid rgba(1,1,1,0.2);*/
                         border-radius:1em;

                         top: 1em;
                         background-color: rgba(181, 187, 192, 0.98);
                         color: rgba(47, 65, 84,1);
                         padding-bottom: 1em;
                         z-index: 100;

                         ">

                        <div class="inner">
                            <h3 class="masthead-brand" style=" font-weight: 300; font-size: 3em;">THE Summit</h3>
                            <div class="col-lg-6 col-lg-offset-1" style=" position: relative; top: 1.5em;">
                                <div class="input-group">

                                    <span class="input-group-btn">
                                        <button class="btn btn-default form_elt" type="button">
                                            <span class="glyphicon glyphicon-search"></span>


                                        </button>
                                    </span>
                                    <input type="text" class="form-control form_elt" placeholder="Search">
                                </div><!-- /input-group -->
                            </div>
                            <ul class="nav masthead-nav">
                                <li class="active"><a href="#">Login</a></li>
                                <li><a href="#">Sign Up</a></li>
                                <li><a href="#">Contact</a></li>
                            </ul>
                        </div>
                    </div>

                    <!------------------------------------>

                    <!------------------start of container------------------>

                    <div class="container" role="main" style="
                         border: 1px solid rgba(1,1,1,0.2); 
                         position: relative;
                         top: 2em;
                         ">



                        <div class="row" role="main" style="

                             ">

                            <div class="col-lg-4" role="main" style="
                                 border: 1px solid rgba(1,1,1,0.2); 

                                 ">

                                <button type="button" class="btn btn-danger pophere" data-container="body" 
                                        data-toggle="popover" data-placement="top" 
                                        title="I am testing"
                                        data-content="Vivamus sagittis lacus vel augue dxgg dg fdgfdgfdg fdgfdgfdgfdg fdgfdgfdg fdgfdgdfgfd dfgdfgfdg laoreet rutrum faucibus.">
                                    Popover on top
                                </button>



                            </div>

                            <div class="col-lg-4" role="main" style="
                                 border: 1px solid rgba(1,1,1,0.2); 
                                 padding-top: 1em;
                                 ">


                                <hr>
                            </div>

                            <div class="col-lg-4" role="main" style="
                                 border: 1px solid rgba(1,1,1,0.2); 

                                 ">
                                bootstrap half
                                <hr>
                            </div>
                        </div>

                        <div class="row" style="border: 1px solid rgba(1,1,1,0.2);">

                            <div class="col-sm-2 " style="position: relative; border: 1px solid rgba(1,100,1,0.2);">

                                <div id="gvt_quest01" data-pos="lu" style="position:relative; width: 70%; height: 70px; background-color: #17a689; border: 1px solid #0f705d;">
                                    GVT Questions!
                                    <div class="triangle myarr"  style="
                                         position: absolute;
                                         top : 1em;
                                         left: 1em;

                                         -webkit-transform:rotate(0deg);

                                         ">

                                    </div>

                                </div>

                            </div>
                            <div class="col-sm-2 " style="position: relative; "> 
                                <div id="gvt_quest02" data-pos="lu" style="position:relative; width: 70%; height: 70px; background-color: #17a689; border: 1px solid #0f705d;">
                                    GVT Questions!
                                    <div class="triangle myarr"  style="
                                         position: absolute;
                                         top : 1em;
                                         left: 1em;

                                         -webkit-transform:rotate(0deg);

                                         ">

                                    </div>

                                </div>
                                <hr>
                                <div id="gvt_quest03" data-pos="lu" style="position:relative; width: 70%; height: 70px; background-color: #17a689; border: 1px solid #0f705d;">
                                    GVT Questions!
                                    <div class="triangle myarr"  style="
                                         position: absolute;
                                         top : 1em;
                                         left: 1em;

                                         -webkit-transform:rotate(0deg);

                                         ">

                                    </div>

                                </div>
                            </div>
                            <div class="col-sm-4 " style="position: relative; ">
                                <h1 class="cover-heading">&nbsp;</h1>
                                <div class="lead" id="earth_center"  title="earth">
                                    <img class="img-thumbnail"  data-src="holder.js/170x170" 
                                         alt="170x170" 
                                         src="img/earth_3d_rgb.jpg"
                                         style="width: 170px; height: 170px;">
                                </div>

                            </div>
                            <div class="col-sm-2 " style="position: relative; "> 
                                <div id="gvt_quest11" data-pos="ru" style="position:relative; width: 70%; height: 70px; background-color: #17a689; border: 1px solid #0f705d;">
                                    GVT Questions!
                                    <div class="triangle myarr"  style="
                                         position: absolute;
                                         top : 1em;
                                         left: 1em;

                                         -webkit-transform:rotate(0deg);

                                         ">

                                    </div>

                                </div>
                            </div>
                            <div class="col-sm-2 " style="position: relative; border: 1px solid rgba(1,100,1,0.2);" >

                                <div id="gvt_quest12" data-pos="ru" style="position:relative; width: 70%; height: 70px; background-color: #17a689; border: 1px solid #0f705d;">
                                    GVT Questions!
                                    <div class="triangle myarr"  style="
                                         position: absolute;
                                         top : 1em;
                                         left: 1em;

                                         -webkit-transform:rotate(0deg);

                                         ">

                                    </div>

                                </div>
                                <hr>
                                <div id="gvt_quest13" data-pos="lu" style="position:relative; width: 70%; height: 70px; background-color: #17a689; border: 1px solid #0f705d;">

                                    GVT Questions!
                                    <div class="triangle myarr"  style="
                                         position: absolute;
                                         top : 1em;
                                         left: 1em;

                                         -webkit-transform:rotate(0deg);

                                         ">

                                    </div>

                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-1" style="position: relative"></div>
                            <div class="col-sm-4" style="position: relative">
                                <div id="gvt_quest21" data-pos="lb" style="position:relative; width: 70%; height: 70px; background-color: #17a689; border: 1px solid #0f705d;">
                                    GVT Questions!
                                    <div class="triangle myarr"  style="
                                         position: absolute;
                                         top : 1em;
                                         left: 1em;

                                         -webkit-transform:rotate(0deg);

                                         ">

                                    </div>

                                </div>
                            </div>
                            <div class="col-sm-4" style="position: relative">
                                <div id="gvt_quest22" data-pos="lb" style="position:relative; width: 70%; height: 70px; background-color: #17a689; border: 1px solid #0f705d;">
                                    GVT Questions!
                                    <div class="triangle myarr"  style="
                                         position: absolute;
                                         top : 1em;
                                         left: 1em;

                                         -webkit-transform:rotate(0deg);

                                         ">

                                    </div>

                                </div>
                            </div>
                            <div class="col-sm-3" style="position: relative">
                                <div id="gvt_quest23" data-pos="rb" style="position:relative; width: 70%; height: 70px; background-color: #17a689; border: 1px solid #0f705d;">
                                    GVT Questions!
                                    <div class="triangle myarr"  style="
                                         position: absolute;
                                         top : 1em;
                                         left: 1em;

                                         -webkit-transform:rotate(0deg);

                                         ">

                                    </div>

                                </div>
                            </div>
                        </div>

                        <canvas id="myCanvas" width="100" height="500" style="
                                position: absolute;
                                top: 0;
                                left: 0;
                                z-index: 500;
                                border: 1px solid rgba(82, 77, 77, 0);
                                background-color: rgba(0, 0, 0, 0.5);
                                ">
                            Your browser does not support the HTML5 canvas tag.
                        </canvas>

                    </div>
                    <!----------------end of container-------------------->

                </div>

            </div>
        </div>



        <!-- Bootstrap core JavaScript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="js/libs/jquery/jquery.js"></script>
        <script src="css/boot/js/bootstrap.js"></script>
        <!--<script src="../../assets/js/docs.min.js"></script>-->
        <script type="text/javascript">

            $(".ttip").tooltip();
            $('.pophere').popover({});
            // var c = null;
            // var ctx = null;
            function testLine(p) {
                var c = document.getElementById("myCanvas");
                var ctx = c.getContext("2d");
                ctx.beginPath();

                ctx.moveTo(p.sx, p.sy);
                ctx.lineTo(p.ex, p.ey);
                ctx.stroke();

                //console.log($("#gvt_quest").offsetParent().position().left);
            }

            function compDegree(p1, p2) {

                var hg = p1.cy - p2.cy;
                var wd = p1.cx - p2.cx;

                // console.log({w: wd, h: hg});
                var h = Math.sqrt((hg * hg) + (wd * wd));

                var angle = Math.acos(wd / h);
                var deg = 180 * (angle / Math.PI);

                console.log({rad: angle, deg: deg});

                return deg * getSign(hg);
            }

            function getCenter(el) {
                var p = {x: 0, y: 0, w: 0, h: 0, cx: 0, cy: 0};

                p.x = $(el).position().left + $(el).offsetParent().position().left;
                p.y = $(el).position().top + $(el).offsetParent().position().top;
                p.w = $(el).innerWidth();
                p.h = $(el).innerHeight();

                p.cx = p.x + (p.w / 2);
                p.cy = p.y + (p.h / 2);

                return p;
            }

            /**
             * compute angle equ
             * @param {type} elt
             * @returns {Number} angle equivelent to a halh of the height of elt
             */
            function computeOpen(elt) {
                var wd = $(elt).innerWidth() / 2;
                var hd = $(elt).innerHeight() / 2;
                var angle = Math.atan(hd / wd);
                var deg = 180 * (angle / Math.PI);

                return deg;

            }


            /**
             * 
             * @param {type} deg
             * @param {type} elt
             * @returns {undefined} 
             */
            function positionArr(deg, elt) {

                var arr = $(elt).children(".myarr");

                var angle = (deg < 0) ? 360 + deg : deg;
                var wpos = true, hpos = true;
                if (($(elt).attr("data-pos") === "lb") || ($(elt).attr("data-pos") === "rb")) {
                    hpos = false;
                }

                if (($(elt).attr("data-pos") === "ru") || ($(elt).attr("data-pos") === "rb")) {
                    wpos = false;
                    console.log($(elt).attr("data-pos"));
                }

                var arrWd = 25;

                var halfH = computeOpen(elt);
                var x = 180 - (2 * halfH);

                var c1 = halfH, c2 = x + halfH, c3 = x + (3 * halfH), c4 = 390 - halfH;

                var cx = 0;
                var cy = 0;
                if (((-halfH) < angle && angle < c1)) {
                    angle = 0;
                    cx = $(elt).innerWidth();

                } else if ((c2 < angle && angle < c3)) {
                    angle = 180;
                    cx = 0 - $(arr).outerWidth();

                } else if ((c1 < angle && angle < c2)) {
                    angle = 90;
                    cy = $(elt).innerHeight();
                } else if ((c3 < angle && angle < c4)) {

                    angle = 270;
                    cy = 0 - $(elt).innerHeight()/2 ;
                }

               
                console.log(deg);
                console.log(angle);



                // var cx = $(elt).innerWidth() / 2 - ($(arr).outerWidth() / 2);
                // var cy = $(elt).innerHeight() / 2 - ($(arr).outerHeight() / 2);
                $(arr).css({
                    top: cy + "px",
                    left: cx + "px",
                    "border-left": arrWd + "px solid #BDC3C7"
                });

                $(arr).css({"-webkit-transform": "rotate(" + angle + "deg)"});




            }

            function getSign(p) {

                return p / Math.abs(p);
            }

            var elts = ["#gvt_quest01", "#gvt_quest02", "#gvt_quest03", "#gvt_quest11", "#gvt_quest12", "#gvt_quest13", "#gvt_quest23", "#gvt_quest21", "#gvt_quest22"];





            $(window).resize(function() {
                var i;
                for (i = 0; i < elts.length; i++) {
                    var center = getCenter("#earth_center");
                    var elt = getCenter(elts[i]);

                    //if (c === null)

                    //if (ctx === null)

                    //update canvas size
                    //c.width = $(elts[i]).offsetParent().offsetParent().innerWidth();
                    //c.height = $(elts[i]).offsetParent().offsetParent().innerHeight();

                    var an = compDegree(center, elt);
                    positionArr(an, elts[i]);
                    //testLine({sx: elt.cx, sy: elt.cy, ex: center.cx, ey: center.cy});
                }
            });

        </script>

    </body>
</html>
